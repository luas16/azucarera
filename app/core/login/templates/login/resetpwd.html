{% extends 'login/base.html' %}
{% load widget_tweaks %}
{% block content %}
    <div class="login-box">
        <div class="card">
            <div class="login-logo " style="color: white;">
                <a href="{% url 'index' %}"><b>Azucarera</b>LS</a>
            </div>
            <div class="login-wrap">
                <div class="login-html">
                    <br>
                    <br>
                    <br>
                    <br>
                    <br>
                    <p class="login-box-msg">Reseteo de contraseña</p>
                    <form action=".." method="post">
                        <input type="hidden" name="next" value="{{ next }}">
                        {% csrf_token %}
                        <div class="group">
                                 {{ form.username|add_class:'input'|attr:'autocomplete:off'|attr:'placeholder:Ingrese su usuario' }}
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-lg-12">
                                <button type="submit" class="btn btn-primary btn-block">
                                    <i class="fas fa-envelope"></i> Enviar
                                </button>
                            </div>
                        </div>
                        <p class="text-center mt-2" style="font-size: 13px;">
                            Si deseas volver al login da un click <a
                                href="{% url 'login' %}">aqui </a>
                        </p>
                    </form>
                </div>
            </div>
            <script type="application/javascript">
                $(function () {
                    $('form').on('submit', function (e) {
                        e.preventDefault();
                        var parameters = new FormData(this);
                        submit_with_ajax(window.location.pathname, 'Notificación', '¿Estas seguro de resetear tu contraseña?', parameters, function () {
                            Swal.fire({
                                title: 'Notificación',
                                text: 'Se ha enviado un correo electrónico con los pasos a seguir para que pueda resetear su contraseña',
                                icon: 'success',
                                timer: 5000,
                                onClose: () => {
                                    location.href = '/';
                                }
                            }).then((result) => {

                            });
                        });
                    });
                });
            </script>
        </div>
{% endblock %}